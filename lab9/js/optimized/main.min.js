document.addEventListener("DOMContentLoaded", function () { console.log("Main JS loaded"); function lazyLoadImages() { const lazyImages = document.querySelectorAll("img[loading='lazy']"); if ("IntersectionObserver" in window) { const imageObserver = new IntersectionObserver(function (entries, observer) { entries.forEach(function (entry) { if (entry.isIntersecting) { const img = entry.target; if (img.dataset.src) { img.src = img.dataset.src; img.removeAttribute("data-src") } img.classList.add("loaded"); imageObserver.unobserve(img) } }) }); lazyImages.forEach(function (img) { imageObserver.observe(img) }) } else { lazyImages.forEach(function (img) { if (img.dataset.src) { img.src = img.dataset.src; img.removeAttribute("data-src") } }) } } lazyLoadImages() }); 